// Code generated by Wire. DO NOT EDIT.

//go:generate go run github.com/google/wire/cmd/wire
//go:build !wireinject
// +build !wireinject

package interfaces

import (
	"context"
	"mcp-server-demo/application/appservice"
	"mcp-server-demo/application/dto"
	"mcp-server-demo/infrastructure/adapter"
	"mcp-server-demo/infrastructure/common/cache"
	"mcp-server-demo/infrastructure/common/db"
	"mcp-server-demo/infrastructure/common/logit"
	"mcp-server-demo/infrastructure/common/request"
	"mcp-server-demo/infrastructure/common/response"
	"mcp-server-demo/infrastructure/po"
	"mcp-server-demo/infrastructure/repository"
	"mcp-server-demo/interfaces/http"
	"mcp-server-demo/interfaces/http/controller"
)

// Injectors from wire.go:

func NewApp(ctx context.Context) (*app, error) {
	serviceLoggerConf, err := logit.NewServiceLoggerConf()
	if err != nil {
		return nil, err
	}
	loggerInterface, err := logit.NewServiceLogger(serviceLoggerConf)
	if err != nil {
		return nil, err
	}
	appConf, err := loadAppConf()
	if err != nil {
		return nil, err
	}
	bindInterface := request.NewRequest(loggerInterface)
	httpResponseInterface := response.NewHTTPResponseWriter(loggerInterface)
	orderConv := dto.NewOrderConv()
	userAdapter := adapter.NewUserAdapter()
	dbDB, err := db.NewDB()
	if err != nil {
		return nil, err
	}
	orderPOConv := po.NewOrderPOConv()
	orderRepository := repository.NewOrderRepository(dbDB, orderPOConv)
	orderAS := appservice.NewOrderAS(orderConv, userAdapter, orderRepository)
	order := controller.NewOrder(bindInterface, httpResponseInterface, orderAS)
	redis, err := cache.NewRedis()
	if err != nil {
		return nil, err
	}
	health := controller.NewHealth(httpResponseInterface, redis)
	handler := http.NewHTTPHandler(loggerInterface, order, health, httpResponseInterface)
	server, err := newHTTPServer(appConf, handler)
	if err != nil {
		return nil, err
	}
	interfacesApp := &app{
		ctx:        ctx,
		logger:     loggerInterface,
		conf:       appConf,
		httpServer: server,
	}
	return interfacesApp, nil
}
